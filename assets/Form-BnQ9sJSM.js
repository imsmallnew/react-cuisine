import{i as z,a as bs,c as _s,u as ws,r as me,g as We,j as f,e as je,s as ps,d as Fs,p as Ze,h as As}from"./index-BqobUboi.js";var he=e=>e.type==="checkbox",re=e=>e instanceof Date,U=e=>e==null;const is=e=>typeof e=="object";var N=e=>!U(e)&&!Array.isArray(e)&&is(e)&&!re(e),Vs=e=>N(e)&&e.target?he(e.target)?e.target.checked:e.target.value:e,Ns=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,js=(e,r)=>e.has(Ns(r)),Ds=e=>{const r=e.constructor&&e.constructor.prototype;return N(r)&&r.hasOwnProperty("isPrototypeOf")},Te=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function H(e){let r;const t=Array.isArray(e),l=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(Te&&(e instanceof Blob||l))&&(t||N(e)))if(r=t?[]:{},!t&&!Ds(e))r=e;else for(const n in e)e.hasOwnProperty(n)&&(r[n]=H(e[n]));else return e;return r}var pe=e=>Array.isArray(e)?e.filter(Boolean):[],j=e=>e===void 0,h=(e,r,t)=>{if(!r||!N(e))return t;const l=pe(r.split(/[,[\].]+?/)).reduce((n,o)=>U(n)?n:n[o],e);return j(l)||l===e?j(e[r])?t:e[r]:l},Y=e=>typeof e=="boolean",Ce=e=>/^\w*$/.test(e),as=e=>pe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),F=(e,r,t)=>{let l=-1;const n=Ce(r)?[r]:as(r),o=n.length,y=o-1;for(;++l<o;){const g=n[l];let T=t;if(l!==y){const A=e[g];T=N(A)||Array.isArray(A)?A:isNaN(+n[l+1])?{}:[]}if(g==="__proto__"||g==="constructor"||g==="prototype")return;e[g]=T,e=e[g]}return e};const Ke={BLUR:"blur",FOCUS_OUT:"focusout"},K={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},X={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};z.createContext(null);var ks=(e,r,t,l=!0)=>{const n={defaultValues:r._defaultValues};for(const o in e)Object.defineProperty(n,o,{get:()=>{const y=o;return r._proxyFormState[y]!==K.all&&(r._proxyFormState[y]=!l||K.all),e[y]}});return n},R=e=>N(e)&&!Object.keys(e).length,Es=(e,r,t,l)=>{t(e);const{name:n,...o}=e;return R(o)||Object.keys(o).length>=Object.keys(r).length||Object.keys(o).find(y=>r[y]===K.all)},xe=e=>Array.isArray(e)?e:[e];function Ss(e){const r=z.useRef(e);r.current=e,z.useEffect(()=>{const t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}var J=e=>typeof e=="string",Ts=(e,r,t,l,n)=>J(e)?(l&&r.watch.add(e),h(t,e,n)):Array.isArray(e)?e.map(o=>(l&&r.watch.add(o),h(t,o))):(l&&(r.watchAll=!0),t),Cs=(e,r,t,l,n)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[l]:n||!0}}:{},Ye=e=>({isOnSubmit:!e||e===K.onSubmit,isOnBlur:e===K.onBlur,isOnChange:e===K.onChange,isOnAll:e===K.all,isOnTouch:e===K.onTouched}),Ge=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(l=>e.startsWith(l)&&/^\.\w+/.test(e.slice(l.length))));const ye=(e,r,t,l)=>{for(const n of t||Object.keys(e)){const o=h(e,n);if(o){const{_f:y,...g}=o;if(y){if(y.refs&&y.refs[0]&&r(y.refs[0],n)&&!l)return!0;if(y.ref&&r(y.ref,y.name)&&!l)return!0;if(ye(g,r))break}else if(N(g)&&ye(g,r))break}}};var Os=(e,r,t)=>{const l=xe(h(e,t));return F(l,"root",r[t]),F(e,t,l),e},Oe=e=>e.type==="file",G=e=>typeof e=="function",be=e=>{if(!Te)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},ve=e=>J(e),Ue=e=>e.type==="radio",_e=e=>e instanceof RegExp;const Je={value:!1,isValid:!1},Qe={value:!0,isValid:!0};var ls=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!j(e[0].attributes.value)?j(e[0].value)||e[0].value===""?Qe:{value:e[0].value,isValid:!0}:Qe:Je}return Je};const Xe={isValid:!1,value:null};var ns=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,Xe):Xe;function es(e,r,t="validate"){if(ve(e)||Array.isArray(e)&&e.every(ve)||Y(e)&&!e)return{type:t,message:ve(e)?e:"",ref:r}}var ne=e=>N(e)&&!_e(e)?e:{value:e,message:""},ss=async(e,r,t,l,n,o)=>{const{ref:y,refs:g,required:T,maxLength:A,minLength:V,min:v,max:te,pattern:ie,validate:L,name:C,valueAsNumber:B,mount:W}=e._f,w=h(t,C);if(!W||r.has(C))return{};const P=g?g[0]:y,I=_=>{n&&P.reportValidity&&(P.setCustomValidity(Y(_)?"":_||""),P.reportValidity())},b={},M=Ue(y),ae=he(y),Q=M||ae,le=(B||Oe(y))&&j(y.value)&&j(w)||be(y)&&y.value===""||w===""||Array.isArray(w)&&!w.length,q=Cs.bind(null,C,l,b),ge=(_,p,D,O=X.maxLength,Z=X.minLength)=>{const $=_?p:D;b[C]={type:_?O:Z,message:$,ref:y,...q(_?O:Z,$)}};if(o?!Array.isArray(w)||!w.length:T&&(!Q&&(le||U(w))||Y(w)&&!w||ae&&!ls(g).isValid||M&&!ns(g).isValid)){const{value:_,message:p}=ve(T)?{value:!!T,message:T}:ne(T);if(_&&(b[C]={type:X.required,message:p,ref:P,...q(X.required,p)},!l))return I(p),b}if(!le&&(!U(v)||!U(te))){let _,p;const D=ne(te),O=ne(v);if(!U(w)&&!isNaN(w)){const Z=y.valueAsNumber||w&&+w;U(D.value)||(_=Z>D.value),U(O.value)||(p=Z<O.value)}else{const Z=y.valueAsDate||new Date(w),$=ce=>new Date(new Date().toDateString()+" "+ce),oe=y.type=="time",ue=y.type=="week";J(D.value)&&w&&(_=oe?$(w)>$(D.value):ue?w>D.value:Z>new Date(D.value)),J(O.value)&&w&&(p=oe?$(w)<$(O.value):ue?w<O.value:Z<new Date(O.value))}if((_||p)&&(ge(!!_,D.message,O.message,X.max,X.min),!l))return I(b[C].message),b}if((A||V)&&!le&&(J(w)||o&&Array.isArray(w))){const _=ne(A),p=ne(V),D=!U(_.value)&&w.length>+_.value,O=!U(p.value)&&w.length<+p.value;if((D||O)&&(ge(D,_.message,p.message),!l))return I(b[C].message),b}if(ie&&!le&&J(w)){const{value:_,message:p}=ne(ie);if(_e(_)&&!w.match(_)&&(b[C]={type:X.pattern,message:p,ref:y,...q(X.pattern,p)},!l))return I(p),b}if(L){if(G(L)){const _=await L(w,t),p=es(_,P);if(p&&(b[C]={...p,...q(X.validate,p.message)},!l))return I(p.message),b}else if(N(L)){let _={};for(const p in L){if(!R(_)&&!l)break;const D=es(await L[p](w,t),P,p);D&&(_={...D,...q(p,D.message)},I(D.message),l&&(b[C]=_))}if(!R(_)&&(b[C]={ref:P,..._},!l))return b}}return I(!0),b};function Us(e,r){const t=r.slice(0,-1).length;let l=0;for(;l<t;)e=j(e)?l++:e[r[l++]];return e}function Ms(e){for(const r in e)if(e.hasOwnProperty(r)&&!j(e[r]))return!1;return!0}function k(e,r){const t=Array.isArray(r)?r:Ce(r)?[r]:as(r),l=t.length===1?e:Us(e,t),n=t.length-1,o=t[n];return l&&delete l[o],n!==0&&(N(l)&&R(l)||Array.isArray(l)&&Ms(l))&&k(e,t.slice(0,-1)),e}var De=()=>{let e=[];return{get observers(){return e},next:n=>{for(const o of e)o.next&&o.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(o=>o!==n)}}),unsubscribe:()=>{e=[]}}},Se=e=>U(e)||!is(e);function se(e,r){if(Se(e)||Se(r))return e===r;if(re(e)&&re(r))return e.getTime()===r.getTime();const t=Object.keys(e),l=Object.keys(r);if(t.length!==l.length)return!1;for(const n of t){const o=e[n];if(!l.includes(n))return!1;if(n!=="ref"){const y=r[n];if(re(o)&&re(y)||N(o)&&N(y)||Array.isArray(o)&&Array.isArray(y)?!se(o,y):o!==y)return!1}}return!0}var os=e=>e.type==="select-multiple",Rs=e=>Ue(e)||he(e),ke=e=>be(e)&&e.isConnected,us=e=>{for(const r in e)if(G(e[r]))return!0;return!1};function we(e,r={}){const t=Array.isArray(e);if(N(e)||t)for(const l in e)Array.isArray(e[l])||N(e[l])&&!us(e[l])?(r[l]=Array.isArray(e[l])?[]:{},we(e[l],r[l])):U(e[l])||(r[l]=!0);return r}function cs(e,r,t){const l=Array.isArray(e);if(N(e)||l)for(const n in e)Array.isArray(e[n])||N(e[n])&&!us(e[n])?j(r)||Se(t[n])?t[n]=Array.isArray(e[n])?we(e[n],[]):{...we(e[n])}:cs(e[n],U(r)?{}:r[n],t[n]):t[n]=!se(e[n],r[n]);return t}var de=(e,r)=>cs(e,r,we(r)),ds=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:l})=>j(e)?e:r?e===""?NaN:e&&+e:t&&J(e)?new Date(e):l?l(e):e;function Ee(e){const r=e.ref;return Oe(r)?r.files:Ue(r)?ns(e.refs).value:os(r)?[...r.selectedOptions].map(({value:t})=>t):he(r)?ls(e.refs).value:ds(j(r.value)?e.ref.value:r.value,e)}var Ls=(e,r,t,l)=>{const n={};for(const o of e){const y=h(r,o);y&&F(n,o,y._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:l}},fe=e=>j(e)?e:_e(e)?e.source:N(e)?_e(e.value)?e.value.source:e.value:e;const ts="AsyncFunction";var Bs=e=>!!e&&!!e.validate&&!!(G(e.validate)&&e.validate.constructor.name===ts||N(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===ts)),Ps=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function rs(e,r,t){const l=h(e,t);if(l||Ce(t))return{error:l,name:t};const n=t.split(".");for(;n.length;){const o=n.join("."),y=h(r,o),g=h(e,o);if(y&&!Array.isArray(y)&&t!==o)return{name:t};if(g&&g.type)return{name:o,error:g};n.pop()}return{name:t}}var Is=(e,r,t,l,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(r||e):(t?l.isOnBlur:n.isOnBlur)?!e:(t?l.isOnChange:n.isOnChange)?e:!0,qs=(e,r)=>!pe(h(e,r)).length&&k(e,r);const $s={mode:K.onSubmit,reValidateMode:K.onChange,shouldFocusError:!0};function Hs(e={}){let r={...$s,...e},t={submitCount:0,isDirty:!1,isLoading:G(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},l={},n=N(r.defaultValues)||N(r.values)?H(r.defaultValues||r.values)||{}:{},o=r.shouldUnregister?{}:H(n),y={action:!1,mount:!1,watch:!1},g={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},T,A=0;const V={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={values:De(),array:De(),state:De()},te=Ye(r.mode),ie=Ye(r.reValidateMode),L=r.criteriaMode===K.all,C=s=>i=>{clearTimeout(A),A=setTimeout(s,i)},B=async s=>{if(!r.disabled&&(V.isValid||s)){const i=r.resolver?R((await Q()).errors):await q(l,!0);i!==t.isValid&&v.state.next({isValid:i})}},W=(s,i)=>{!r.disabled&&(V.isValidating||V.validatingFields)&&((s||Array.from(g.mount)).forEach(a=>{a&&(i?F(t.validatingFields,a,i):k(t.validatingFields,a))}),v.state.next({validatingFields:t.validatingFields,isValidating:!R(t.validatingFields)}))},w=(s,i=[],a,d,c=!0,u=!0)=>{if(d&&a&&!r.disabled){if(y.action=!0,u&&Array.isArray(h(l,s))){const m=a(h(l,s),d.argA,d.argB);c&&F(l,s,m)}if(u&&Array.isArray(h(t.errors,s))){const m=a(h(t.errors,s),d.argA,d.argB);c&&F(t.errors,s,m),qs(t.errors,s)}if(V.touchedFields&&u&&Array.isArray(h(t.touchedFields,s))){const m=a(h(t.touchedFields,s),d.argA,d.argB);c&&F(t.touchedFields,s,m)}V.dirtyFields&&(t.dirtyFields=de(n,o)),v.state.next({name:s,isDirty:_(s,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else F(o,s,i)},P=(s,i)=>{F(t.errors,s,i),v.state.next({errors:t.errors})},I=s=>{t.errors=s,v.state.next({errors:t.errors,isValid:!1})},b=(s,i,a,d)=>{const c=h(l,s);if(c){const u=h(o,s,j(a)?h(n,s):a);j(u)||d&&d.defaultChecked||i?F(o,s,i?u:Ee(c._f)):O(s,u),y.mount&&B()}},M=(s,i,a,d,c)=>{let u=!1,m=!1;const x={name:s};if(!r.disabled){const E=!!(h(l,s)&&h(l,s)._f&&h(l,s)._f.disabled);if(!a||d){V.isDirty&&(m=t.isDirty,t.isDirty=x.isDirty=_(),u=m!==x.isDirty);const S=E||se(h(n,s),i);m=!!(!E&&h(t.dirtyFields,s)),S||E?k(t.dirtyFields,s):F(t.dirtyFields,s,!0),x.dirtyFields=t.dirtyFields,u=u||V.dirtyFields&&m!==!S}if(a){const S=h(t.touchedFields,s);S||(F(t.touchedFields,s,a),x.touchedFields=t.touchedFields,u=u||V.touchedFields&&S!==a)}u&&c&&v.state.next(x)}return u?x:{}},ae=(s,i,a,d)=>{const c=h(t.errors,s),u=V.isValid&&Y(i)&&t.isValid!==i;if(r.delayError&&a?(T=C(()=>P(s,a)),T(r.delayError)):(clearTimeout(A),T=null,a?F(t.errors,s,a):k(t.errors,s)),(a?!se(c,a):c)||!R(d)||u){const m={...d,...u&&Y(i)?{isValid:i}:{},errors:t.errors,name:s};t={...t,...m},v.state.next(m)}},Q=async s=>{W(s,!0);const i=await r.resolver(o,r.context,Ls(s||g.mount,l,r.criteriaMode,r.shouldUseNativeValidation));return W(s),i},le=async s=>{const{errors:i}=await Q(s);if(s)for(const a of s){const d=h(i,a);d?F(t.errors,a,d):k(t.errors,a)}else t.errors=i;return i},q=async(s,i,a={valid:!0})=>{for(const d in s){const c=s[d];if(c){const{_f:u,...m}=c;if(u){const x=g.array.has(u.name),E=c._f&&Bs(c._f);E&&V.validatingFields&&W([d],!0);const S=await ss(c,g.disabled,o,L,r.shouldUseNativeValidation&&!i,x);if(E&&V.validatingFields&&W([d]),S[u.name]&&(a.valid=!1,i))break;!i&&(h(S,u.name)?x?Os(t.errors,S,u.name):F(t.errors,u.name,S[u.name]):k(t.errors,u.name))}!R(m)&&await q(m,i,a)}}return a.valid},ge=()=>{for(const s of g.unMount){const i=h(l,s);i&&(i._f.refs?i._f.refs.every(a=>!ke(a)):!ke(i._f.ref))&&Fe(s)}g.unMount=new Set},_=(s,i)=>!r.disabled&&(s&&i&&F(o,s,i),!se(Me(),n)),p=(s,i,a)=>Ts(s,g,{...y.mount?o:j(i)?n:J(s)?{[s]:i}:i},a,i),D=s=>pe(h(y.mount?o:n,s,r.shouldUnregister?h(n,s,[]):[])),O=(s,i,a={})=>{const d=h(l,s);let c=i;if(d){const u=d._f;u&&(!u.disabled&&F(o,s,ds(i,u)),c=be(u.ref)&&U(i)?"":i,os(u.ref)?[...u.ref.options].forEach(m=>m.selected=c.includes(m.value)):u.refs?he(u.ref)?u.refs.length>1?u.refs.forEach(m=>(!m.defaultChecked||!m.disabled)&&(m.checked=Array.isArray(c)?!!c.find(x=>x===m.value):c===m.value)):u.refs[0]&&(u.refs[0].checked=!!c):u.refs.forEach(m=>m.checked=m.value===c):Oe(u.ref)?u.ref.value="":(u.ref.value=c,u.ref.type||v.values.next({name:s,values:{...o}})))}(a.shouldDirty||a.shouldTouch)&&M(s,c,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&ce(s)},Z=(s,i,a)=>{for(const d in i){const c=i[d],u=`${s}.${d}`,m=h(l,u);(g.array.has(s)||N(c)||m&&!m._f)&&!re(c)?Z(u,c,a):O(u,c,a)}},$=(s,i,a={})=>{const d=h(l,s),c=g.array.has(s),u=H(i);F(o,s,u),c?(v.array.next({name:s,values:{...o}}),(V.isDirty||V.dirtyFields)&&a.shouldDirty&&v.state.next({name:s,dirtyFields:de(n,o),isDirty:_(s,u)})):d&&!d._f&&!U(u)?Z(s,u,a):O(s,u,a),Ge(s,g)&&v.state.next({...t}),v.values.next({name:y.mount?s:void 0,values:{...o}})},oe=async s=>{y.mount=!0;const i=s.target;let a=i.name,d=!0;const c=h(l,a),u=()=>i.type?Ee(c._f):Vs(s),m=x=>{d=Number.isNaN(x)||re(x)&&isNaN(x.getTime())||se(x,h(o,a,x))};if(c){let x,E;const S=u(),ee=s.type===Ke.BLUR||s.type===Ke.FOCUS_OUT,ms=!Ps(c._f)&&!r.resolver&&!h(t.errors,a)&&!c._f.deps||Is(ee,h(t.touchedFields,a),t.isSubmitted,ie,te),Ve=Ge(a,g,ee);F(o,a,S),ee?(c._f.onBlur&&c._f.onBlur(s),T&&T(0)):c._f.onChange&&c._f.onChange(s);const Ne=M(a,S,ee,!1),xs=!R(Ne)||Ve;if(!ee&&v.values.next({name:a,type:s.type,values:{...o}}),ms)return V.isValid&&(r.mode==="onBlur"&&ee?B():ee||B()),xs&&v.state.next({name:a,...Ve?{}:Ne});if(!ee&&Ve&&v.state.next({...t}),r.resolver){const{errors:He}=await Q([a]);if(m(S),d){const vs=rs(t.errors,l,a),ze=rs(He,l,vs.name||a);x=ze.error,a=ze.name,E=R(He)}}else W([a],!0),x=(await ss(c,g.disabled,o,L,r.shouldUseNativeValidation))[a],W([a]),m(S),d&&(x?E=!1:V.isValid&&(E=await q(l,!0)));d&&(c._f.deps&&ce(c._f.deps),ae(a,E,x,Ne))}},ue=(s,i)=>{if(h(t.errors,i)&&s.focus)return s.focus(),1},ce=async(s,i={})=>{let a,d;const c=xe(s);if(r.resolver){const u=await le(j(s)?s:c);a=R(u),d=s?!c.some(m=>h(u,m)):a}else s?(d=(await Promise.all(c.map(async u=>{const m=h(l,u);return await q(m&&m._f?{[u]:m}:m)}))).every(Boolean),!(!d&&!t.isValid)&&B()):d=a=await q(l);return v.state.next({...!J(s)||V.isValid&&a!==t.isValid?{}:{name:s},...r.resolver||!s?{isValid:a}:{},errors:t.errors}),i.shouldFocus&&!d&&ye(l,ue,s?c:g.mount),d},Me=s=>{const i={...y.mount?o:n};return j(s)?i:J(s)?h(i,s):s.map(a=>h(i,a))},Re=(s,i)=>({invalid:!!h((i||t).errors,s),isDirty:!!h((i||t).dirtyFields,s),error:h((i||t).errors,s),isValidating:!!h(t.validatingFields,s),isTouched:!!h((i||t).touchedFields,s)}),fs=s=>{s&&xe(s).forEach(i=>k(t.errors,i)),v.state.next({errors:s?t.errors:{}})},Le=(s,i,a)=>{const d=(h(l,s,{_f:{}})._f||{}).ref,c=h(t.errors,s)||{},{ref:u,message:m,type:x,...E}=c;F(t.errors,s,{...E,...i,ref:d}),v.state.next({name:s,errors:t.errors,isValid:!1}),a&&a.shouldFocus&&d&&d.focus&&d.focus()},ys=(s,i)=>G(s)?v.values.subscribe({next:a=>s(p(void 0,i),a)}):p(s,i,!0),Fe=(s,i={})=>{for(const a of s?xe(s):g.mount)g.mount.delete(a),g.array.delete(a),i.keepValue||(k(l,a),k(o,a)),!i.keepError&&k(t.errors,a),!i.keepDirty&&k(t.dirtyFields,a),!i.keepTouched&&k(t.touchedFields,a),!i.keepIsValidating&&k(t.validatingFields,a),!r.shouldUnregister&&!i.keepDefaultValue&&k(n,a);v.values.next({values:{...o}}),v.state.next({...t,...i.keepDirty?{isDirty:_()}:{}}),!i.keepIsValid&&B()},Be=({disabled:s,name:i,field:a,fields:d})=>{(Y(s)&&y.mount||s||g.disabled.has(i))&&(s?g.disabled.add(i):g.disabled.delete(i),M(i,Ee(a?a._f:h(d,i)._f),!1,!1,!0))},Ae=(s,i={})=>{let a=h(l,s);const d=Y(i.disabled)||Y(r.disabled);return F(l,s,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:s}},name:s,mount:!0,...i}}),g.mount.add(s),a?Be({field:a,disabled:Y(i.disabled)?i.disabled:r.disabled,name:s}):b(s,!0,i.value),{...d?{disabled:i.disabled||r.disabled}:{},...r.progressive?{required:!!i.required,min:fe(i.min),max:fe(i.max),minLength:fe(i.minLength),maxLength:fe(i.maxLength),pattern:fe(i.pattern)}:{},name:s,onChange:oe,onBlur:oe,ref:c=>{if(c){Ae(s,i),a=h(l,s);const u=j(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,m=Rs(u),x=a._f.refs||[];if(m?x.find(E=>E===u):u===a._f.ref)return;F(l,s,{_f:{...a._f,...m?{refs:[...x.filter(ke),u,...Array.isArray(h(n,s))?[{}]:[]],ref:{type:u.type,name:s}}:{ref:u}}}),b(s,!1,void 0,u)}else a=h(l,s,{}),a._f&&(a._f.mount=!1),(r.shouldUnregister||i.shouldUnregister)&&!(js(g.array,s)&&y.action)&&g.unMount.add(s)}}},Pe=()=>r.shouldFocusError&&ye(l,ue,g.mount),hs=s=>{Y(s)&&(v.state.next({disabled:s}),ye(l,(i,a)=>{const d=h(l,a);d&&(i.disabled=d._f.disabled||s,Array.isArray(d._f.refs)&&d._f.refs.forEach(c=>{c.disabled=d._f.disabled||s}))},0,!1))},Ie=(s,i)=>async a=>{let d;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let c=H(o);if(g.disabled.size)for(const u of g.disabled)F(c,u,void 0);if(v.state.next({isSubmitting:!0}),r.resolver){const{errors:u,values:m}=await Q();t.errors=u,c=m}else await q(l);if(k(t.errors,"root"),R(t.errors)){v.state.next({errors:{}});try{await s(c,a)}catch(u){d=u}}else i&&await i({...t.errors},a),Pe(),setTimeout(Pe);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:R(t.errors)&&!d,submitCount:t.submitCount+1,errors:t.errors}),d)throw d},gs=(s,i={})=>{h(l,s)&&(j(i.defaultValue)?$(s,H(h(n,s))):($(s,i.defaultValue),F(n,s,H(i.defaultValue))),i.keepTouched||k(t.touchedFields,s),i.keepDirty||(k(t.dirtyFields,s),t.isDirty=i.defaultValue?_(s,H(h(n,s))):_()),i.keepError||(k(t.errors,s),V.isValid&&B()),v.state.next({...t}))},qe=(s,i={})=>{const a=s?H(s):n,d=H(a),c=R(s),u=c?n:d;if(i.keepDefaultValues||(n=a),!i.keepValues){if(i.keepDirtyValues){const m=new Set([...g.mount,...Object.keys(de(n,o))]);for(const x of Array.from(m))h(t.dirtyFields,x)?F(u,x,h(o,x)):$(x,h(u,x))}else{if(Te&&j(s))for(const m of g.mount){const x=h(l,m);if(x&&x._f){const E=Array.isArray(x._f.refs)?x._f.refs[0]:x._f.ref;if(be(E)){const S=E.closest("form");if(S){S.reset();break}}}}l={}}o=r.shouldUnregister?i.keepDefaultValues?H(n):{}:H(u),v.array.next({values:{...u}}),v.values.next({values:{...u}})}g={mount:i.keepDirtyValues?g.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},y.mount=!V.isValid||!!i.keepIsValid||!!i.keepDirtyValues,y.watch=!!r.shouldUnregister,v.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:c?!1:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!se(s,n)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:c?{}:i.keepDirtyValues?i.keepDefaultValues&&o?de(n,o):t.dirtyFields:i.keepDefaultValues&&s?de(n,s):i.keepDirty?t.dirtyFields:{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},$e=(s,i)=>qe(G(s)?s(o):s,i);return{control:{register:Ae,unregister:Fe,getFieldState:Re,handleSubmit:Ie,setError:Le,_executeSchema:Q,_getWatch:p,_getDirty:_,_updateValid:B,_removeUnmounted:ge,_updateFieldArray:w,_updateDisabledField:Be,_getFieldArray:D,_reset:qe,_resetDefaultValues:()=>G(r.defaultValues)&&r.defaultValues().then(s=>{$e(s,r.resetOptions),v.state.next({isLoading:!1})}),_updateFormState:s=>{t={...t,...s}},_disableForm:hs,_subjects:v,_proxyFormState:V,_setErrors:I,get _fields(){return l},get _formValues(){return o},get _state(){return y},set _state(s){y=s},get _defaultValues(){return n},get _names(){return g},set _names(s){g=s},get _formState(){return t},set _formState(s){t=s},get _options(){return r},set _options(s){r={...r,...s}}},trigger:ce,register:Ae,handleSubmit:Ie,watch:ys,setValue:$,getValues:Me,reset:$e,resetField:gs,clearErrors:fs,unregister:Fe,setError:Le,setFocus:(s,i={})=>{const a=h(l,s),d=a&&a._f;if(d){const c=d.refs?d.refs[0]:d.ref;c.focus&&(c.focus(),i.shouldSelect&&G(c.select)&&c.select())}},getFieldState:Re}}function zs(e={}){const r=z.useRef(void 0),t=z.useRef(void 0),[l,n]=z.useState({isDirty:!1,isValidating:!1,isLoading:G(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:G(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...Hs(e),formState:l});const o=r.current.control;return o._options=e,Ss({subject:o._subjects.state,next:y=>{Es(y,o._proxyFormState,o._updateFormState)&&n({...o._formState})}}),z.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),z.useEffect(()=>{if(o._proxyFormState.isDirty){const y=o._getDirty();y!==l.isDirty&&o._subjects.state.next({isDirty:y})}},[o,l.isDirty]),z.useEffect(()=>{e.values&&!se(e.values,t.current)?(o._reset(e.values,o._options.resetOptions),t.current=e.values,n(y=>({...y}))):o._resetDefaultValues()},[e.values,o]),z.useEffect(()=>{e.errors&&o._setErrors(e.errors)},[e.errors,o]),z.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),z.useEffect(()=>{e.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})},[e.shouldUnregister,o]),r.current.formState=ks(l,o),r.current}function Gs(){var L,C,B,W,w,P,I;const e="https://ec-course-api.hexschool.io",r="imsmallnew",t=bs(),l=_s(),{cartList:n}=ws(b=>b.cart),[o,y]=me.useState(!1),{register:g,handleSubmit:T,formState:{errors:A},reset:V}=zs(),v=b=>{const{message:M,...ae}=b,Q={data:{user:ae,message:M}};Object.keys(A).length===0&&ie(Q)},te=me.useCallback(()=>{const b=setTimeout(()=>{l("/")},1e4);return()=>clearTimeout(b)},[l]),ie=async b=>{t(ps("表單傳送中..."));try{await Fs.post(`${e}/v2/api/${r}/order`,b),V(),t(We()),t(Ze({title:"系統提示",text:"購物表單已傳送成功, 請回商品列表繼續購物",status:"success"})),y(!0)}catch{t(Ze({title:"系統提示",text:"結帳失敗",status:"failed"}))}finally{t(As())}};return me.useEffect(()=>{t(We())},[t]),me.useEffect(()=>{var M;((M=n==null?void 0:n.carts)==null?void 0:M.length)===0&&te()},[(L=n==null?void 0:n.carts)==null?void 0:L.length,te]),f.jsx(f.Fragment,{children:f.jsxs("div",{className:"container-fluid",style:{backgroundImage:"url('https://images.unsplash.com/photo-1491960693564-421771d727d6?q=80&w=2863&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')",backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",paddingTop:"60px",position:"relative"},children:[f.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:`rgba(0, 0, 0, ${o?0:.5})`,zIndex:1}}),o?f.jsx(f.Fragment,{children:f.jsxs("div",{className:"position-relative d-flex flex-column align-items-center justify-content-center vh-100 text-center px-4 text-white",style:{zIndex:"20"},children:[f.jsx("h1",{className:"display-3 fw-bold text-shadow",children:" 訂單已送出 "}),f.jsxs("p",{className:"mt-3 fs-4 w-50 text-shadow",children:["感謝您的購買",f.jsx("br",{})," 是否意猶未盡? 歡迎再繼續選購商品！"]}),f.jsxs("div",{className:"row d-flex",children:[f.jsx("div",{className:"arrow-container col-6",children:f.jsxs(je,{to:"/",className:"arrow-btn text-shadow",children:["返回首頁 ",f.jsx("i",{className:"fa fa-cutlery"})]})}),f.jsx("div",{className:"arrow-container col-6",children:f.jsxs(je,{to:"/products",className:"arrow-btn2 text-shadow",children:["繼續點餐 ",f.jsx("i",{className:"fa fa-cutlery"})]})})]})]})}):f.jsx(f.Fragment,{children:f.jsx("div",{className:"container position-relative pb-5 pt-4",style:{zIndex:2},children:f.jsxs("div",{className:"row justify-content-center",children:[f.jsxs("div",{className:"col-md-7 mb-3 mt-1",children:[f.jsx("h4",{className:"text-warning mb-3 text-center",children:"填寫訂單資訊"}),f.jsx("div",{className:"p-4 rounded",style:{backgroundColor:"rgba(255, 255, 255, 0.85)"},children:f.jsxs("form",{onSubmit:T(v),children:[f.jsxs("div",{className:"mb-3",children:[f.jsxs("label",{htmlFor:"name",className:"form-label fw-bold",children:["收件人姓名",f.jsx("span",{className:"text-danger",children:"*"})]}),f.jsx("input",{id:"name",type:"text",className:`form-control ${A.name&&"is-invalid"}`,placeholder:"請輸入姓名",...g("name",{required:"收件人姓名必填"})}),A.name&&f.jsx("p",{className:"text-danger",children:A.name.message})]}),f.jsxs("div",{className:"mb-3",children:[f.jsxs("label",{htmlFor:"email",className:"form-label fw-bold",children:["Email",f.jsx("span",{className:"text-danger",children:"*"})]}),f.jsx("input",{id:"email",type:"email",className:`form-control ${A.email&&"is-invalid"}`,placeholder:"請輸入 Email",...g("email",{required:"Email必填",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Email 格式不正確。"}})}),A.email&&f.jsx("p",{className:"text-danger",children:A.email.message})]}),f.jsxs("div",{className:"mb-3",children:[f.jsxs("label",{htmlFor:"tel",className:"form-label fw-bold",children:["收件人電話",f.jsx("span",{className:"text-danger",children:"*"})]}),f.jsx("input",{id:"tel",type:"tel",className:`form-control ${A.tel&&"is-invalid"}`,placeholder:"請輸入電話",...g("tel",{required:"收件人電話必填",minLength:{value:8,message:"電話號碼至少需要8碼"},pattern:{value:/^\d+$/,message:"電話號碼格式不正確，僅限數字。"}})}),A.tel&&f.jsx("p",{className:"text-danger",children:A.tel.message})]}),f.jsxs("div",{className:"mb-3",children:[f.jsxs("label",{htmlFor:"address",className:"form-label fw-bold",children:["收件人地址",f.jsx("span",{className:"text-danger",children:"*"})]}),f.jsx("input",{id:"address",type:"text",className:`form-control ${A.address&&"is-invalid"}`,placeholder:"請輸入地址",...g("address",{required:"收件人地址必填"})}),A.address&&f.jsx("p",{className:"text-danger",children:A.address.message})]}),f.jsxs("div",{className:"mb-3",children:[f.jsx("label",{htmlFor:"message",className:"form-label fw-bold",children:"留言"}),f.jsx("textarea",{id:"message",className:"form-control",placeholder:"請輸入留言",rows:"3",...g("message")})]}),f.jsxs("div",{className:`${((C=n==null?void 0:n.carts)==null?void 0:C.length)>0?"text-center":"text-center text-danger"}`,children:[f.jsx(je,{className:"btn btn-dark btn-sm px-4 py-2 me-3",to:"/cart",children:"返回購物車"}),f.jsx("button",{type:"submit",className:"btn btn-gold px-4 py-2",disabled:((B=n==null?void 0:n.carts)==null?void 0:B.length)===0,children:((W=n==null?void 0:n.carts)==null?void 0:W.length)>0?"送出訂單":"[溫馨提示]: 購物車需有商品才可結帳唷 ( *´ސު｀*)"})]})]})})]}),f.jsxs("div",{className:"col-md-5 mb-2 mt-1",children:[f.jsx("h4",{className:"text-warning mb-3 text-center",children:"您的購物清單"}),f.jsxs("div",{className:"p-3 rounded",style:{backgroundColor:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(8px)"},children:[((w=n==null?void 0:n.carts)==null?void 0:w.length)===0?f.jsx("div",{className:"text-center",children:f.jsx("span",{className:"badge bg-warning p-2 pe-3 ps-3 text-dark fs-6",children:"購物車目前為空"})}):(P=n==null?void 0:n.carts)==null?void 0:P.map(b=>{var M;return f.jsxs("div",{className:"d-flex align-items-center border-bottom py-2",children:[f.jsx("img",{src:(M=b==null?void 0:b.product)==null?void 0:M.imageUrl,className:"rounded border border-gold",alt:"商品圖片",width:"100"}),f.jsxs("div",{className:"ms-3 flex-grow-1",children:[f.jsx("h6",{className:"text-white",children:b.product.title}),f.jsx("small",{className:"text-warning mt-3",children:f.jsxs("div",{className:"row",children:[f.jsxs("div",{className:"col-12 col-md-6",children:["數量: ",b.qty," "]}),f.jsxs("div",{className:"col-12 col-md-6 count text-end",children:["小計: ",b.total," 元"]})]})})]})]},b.id)}),((I=n==null?void 0:n.carts)==null?void 0:I.length)>0&&f.jsxs("div",{className:"mt-3 text-end",children:[f.jsxs("h5",{className:"text-white",children:["總計: ",f.jsxs("span",{className:"text-white",children:[n.total," 元"]})]}),f.jsxs("h5",{className:"text-warning",children:["折扣價: ",f.jsxs("span",{className:"text-warning",children:[n.final_total," 元"]})]})]})]})]})]})})})]})})}export{Gs as default};
