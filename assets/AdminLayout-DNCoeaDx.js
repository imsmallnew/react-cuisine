import{d as u,a as g,j as a,s as x,e as v,p as d,h as b,P as j,u as N,b as y,r as L,L as f,c as k,N as O,O as P}from"./index-DSFv4uQF.js";import{T}from"./Toast-DJ5vhdZp.js";import{l as w}from"./logo-8gluHM_i.js";import"./bootstrap.esm-CPbp9n-C.js";function p({menuOpen:c}){const l="https://ec-course-api.hexschool.io",e=u(),s=g(),o=async()=>{var i,r;s(x("讀取中..."));try{await v.post(`${l}/v2/logout`),document.cookie="reactHWToken=; expires=",s(d({title:"系統提示",text:"使用者已登出",status:"success"})),e("/login")}catch(n){console.error(n),s(d({title:"系統提示",text:((r=(i=n==null?void 0:n.response)==null?void 0:i.data)==null?void 0:r.message)||"使用者登出失敗",status:"failed"}))}finally{s(b())}};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"nav-item",children:a.jsx("button",{className:`btn ${c?"btn-lg":"btn-sm"} btn-outline-secondary`,type:"button",id:"logoutBtn",onClick:o,children:"登出後台"})})})}p.propTypes={menuOpen:j.bool.isRequired};function C(){const{isLoading:c,loadingText:l}=N(t=>t.loading),e=y(),[s,o]=L.useState(!1),i=e.pathname.startsWith("/admin/products/"),r=e.pathname.startsWith("/admin/orders/"),n=[{path:"/admin",name:"後台首頁",navName:"admin"},{path:"/admin/products/1",name:"商品管理",navName:"products"},{path:"/admin/orders/1",name:"訂單管理",navName:"orders"},{path:"/",name:"返回前台",navName:"front"}];return a.jsxs(a.Fragment,{children:[c&&a.jsx(f,{loadingText:l}),a.jsx(T,{}),a.jsx("nav",{className:"navbar navbar-light navbar-expand-lg text-primary fixed-top shadow bg-dark","data-bs-theme":"dark",children:a.jsxs("div",{className:"container",children:[a.jsxs(k,{className:"navbar-brand site-title",to:"/admin",children:[a.jsx("img",{src:w,style:{width:50,marginRight:"5px"}})," Daniel's Burger Admin"]}),a.jsx("button",{className:"navbar-toggler",type:"button",onClick:()=>o(!s),children:a.jsx("span",{className:"navbar-toggler-icon"})}),a.jsx("div",{className:`collapse navbar-collapse ${s?"show":""}`,children:a.jsxs("ul",{className:"navbar-nav ms-auto",children:[n.map((t,m)=>{const h=e.pathname===t.path;return a.jsx("li",{className:"nav-item",children:a.jsx(O,{to:t.path,onClick:()=>o(!1),className:()=>`btn ${s?"btn-lg":"btn-sm"} ${t.navName==="products"&&i||t.navName==="orders"&&r||h?"btn-secondary":"btn-outline-secondary"} ms-2`,children:t.name},m)},m)}),a.jsx("li",{className:"nav-item ms-2 logout",children:a.jsx(p,{menuOpen:s})})]})})]})}),a.jsx(P,{})]})}export{C as default};
